{"version":3,"file":"static/js/425.a34399c7.chunk.js","mappings":"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","sources":["components/AdminDeskPanel.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\n\n// AdminDeskPanel is self-contained and does not import app stores to avoid touching existing code.\n// It discovers optional snapshot providers via globals, and gracefully degrades if the backend routes are missing.\n// Expected (optional) globals other parts of the app can expose later without changing this panel:\n// - window.CaseCon = {\n//     getAppVersion?: () => string,\n//     // Providers return plain JSON slices to be placed under stores: { storeKey: any }\n//     snapshotProviders?: Array<() => Promise<Record<string, any>> | Record<string, any>>,\n//     // UI state providers: return ui object and temporary data (e.g., tempUids)\n//     uiProvider?: () => Promise<{ ui?: any; temporary?: any; } | { ui?: any; temporary?: any }>,\n//     // Apply snapshot (atomic restore) if implemented by host app; panel emits an event if not present\n//     applySnapshot?: (snapshot) => Promise<void> | void,\n//   }\n\n \n// - window.__CASECON_TEMP_UIDS (optional): Map or plain object of temporary session-only UIDs\n// - window.__APP_VERSION (optional): string version\n\nconst SCHEMA_VERSION = 1;\nconst API_BASE = (() => {\n  try {\n    // 1) Runtime overrides\n    if (typeof window !== 'undefined' && window.CASECON_API_BASE) {\n      return String(window.CASECON_API_BASE).replace(/\\/$/, '');\n    }\n    if (typeof window !== 'undefined' && window.localStorage) {\n      const ls = window.localStorage.getItem('casecon_api_base');\n      if (ls) return String(ls).replace(/\\/$/, '');\n    }\n    // 2) Build-time env\n    const env = (typeof process !== 'undefined' && process.env) ? process.env : {};\n    const direct = env.REACT_APP_API_BASE;\n    if (direct && typeof direct === 'string') return direct.replace(/\\/$/, '');\n    const uidUrl = env.REACT_APP_UID_API_URL;\n    if (uidUrl && typeof uidUrl === 'string') {\n      try {\n        const u = new URL(uidUrl);\n        return `${u.protocol}//${u.host}`;\n      } catch {}\n    }\n  } catch {}\n  return '';\n})();\ntry { console.info('[AdminDesk] API_BASE =', API_BASE || '(same-origin)'); } catch {}\n\nfunction nowIso() {\n  return new Date().toISOString();\n}\n\nasync function sha256Hex(text) {\n  if (window.crypto && window.crypto.subtle) {\n    const enc = new TextEncoder();\n    const data = enc.encode(text);\n    const hash = await window.crypto.subtle.digest('SHA-256', data);\n    const bytes = Array.from(new Uint8Array(hash));\n    return bytes.map(b => b.toString(16).padStart(2, '0')).join('');\n  }\n  // Fallback (non-crypto, not secure) to avoid breaking UI where SubtleCrypto is unavailable\n  let h = 0;\n  for (let i = 0; i < text.length; i++) { h = (h << 5) - h + text.charCodeAt(i); h |= 0; }\n  return ('00000000' + (h >>> 0).toString(16)).slice(-8);\n}\n\nfunction uuid4() {\n  // RFC 4122 v4 (best-effort)\n  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n  );\n}\n\nfunction downloadJson(filename, obj) {\n  const blob = new Blob([JSON.stringify(obj, null, 2)], { type: 'application/json' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  URL.revokeObjectURL(url);\n  a.remove();\n}\n\nasync function tryJson(res) {\n  const text = await res.text();\n  try { return JSON.parse(text); } catch { return { ok: false, raw: text }; }\n}\n\nexport default function AdminDeskPanel() {\n  const showDevInfo = false; // Hide developer-only notes from end users\n  const btnStyle = {\n    padding: '6px 10px',\n    border: '1px solid #d0d7de',\n    borderRadius: 6,\n    background: '#f6f8fa',\n    color: '#24292f',\n    cursor: 'pointer'\n  };\n  const [showTagModal, setShowTagModal] = useState(false);\n  const [snapshots, setSnapshots] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [showSaveDialog, setShowSaveDialog] = useState(false);\n  const [saveForm, setSaveForm] = useState({\n    name: '',\n    includeFiles: false,\n    makePublic: false,\n    comment: ''\n  });\n  const [preview, setPreview] = useState(null);\n  const [busyMsg, setBusyMsg] = useState('');\n  const [saveInlineName, setSaveInlineName] = useState('');\n  const [conn, setConn] = useState('checking'); // 'checking' | 'connected' | 'unavailable'\n  const [apiBase, setApiBase] = useState(API_BASE);\n  const [showApiEdit, setShowApiEdit] = useState(false);\n  const [apiEditValue, setApiEditValue] = useState(API_BASE);\n\n  // Initialize default names on mount\n  useEffect(() => {\n    try { setSaveInlineName(defaultSnapshotName()); } catch {}\n  }, []);\n\n  // Prefill Save As dialog name when opened\n  useEffect(() => {\n    if (showSaveDialog && !saveForm.name) {\n      setSaveForm(s => ({ ...s, name: defaultSnapshotName() }));\n    }\n  }, [showSaveDialog]);\n\n  // Check server connectivity\n  async function checkServer() {\n    try {\n      const base = API_BASE || '';\n      const res = await fetch(`${base}/api/snapshots`, { method: 'GET' });\n      setConn(res.ok ? 'connected' : 'unavailable');\n    } catch {\n      setConn('unavailable');\n    }\n  }\n\n  useEffect(() => {\n    setConn('checking');\n    checkServer();\n  }, []);\n\n  const appVersion = useMemo(() => {\n    const fromEnv = typeof process !== 'undefined' && process.env && process.env.REACT_APP_VERSION;\n    const fromGlobal = (window.__APP_VERSION) || (window.CaseCon && typeof window.CaseCon.getAppVersion === 'function' ? window.CaseCon.getAppVersion() : undefined);\n    return fromEnv || fromGlobal || 'dev-unknown';\n  }, []);\n\n  const createdBy = useMemo(() => {\n    // Try to read a non-sensitive username from globals if available\n    const u = (window.CaseCon && window.CaseCon.username) || (window.__USER_NAME);\n    return u || 'unknown';\n  }, []);\n\n  function defaultSnapshotName() {\n    const d = new Date();\n    const pad = (n) => String(n).padStart(2, '0');\n    const mm = pad(d.getMonth() + 1);\n    const dd = pad(d.getDate());\n    const yyyy = d.getFullYear();\n    const hh = pad(d.getHours());\n    const min = pad(d.getMinutes());\n    return `Recon-${mm}-${dd}-${yyyy}- ${hh}:${min}`;\n  }\n\n  async function collectStoresFromProviders() {\n    const providers = (window.CaseCon && Array.isArray(window.CaseCon.snapshotProviders)) ? window.CaseCon.snapshotProviders : [];\n    const results = await Promise.allSettled(providers.map(fn => Promise.resolve().then(() => fn())));\n    const stores = {};\n    results.forEach(r => {\n      if (r.status === 'fulfilled' && r.value && typeof r.value === 'object') {\n        Object.assign(stores, r.value);\n      }\n    });\n    return stores;\n  }\n\n  function readTempUids() {\n    const g = window.__CASECON_TEMP_UIDS;\n    if (!g) return undefined;\n    try {\n      if (g instanceof Map) {\n        return Object.fromEntries(g.entries());\n      }\n      if (typeof g === 'object') return g;\n    } catch {}\n    return undefined;\n  }\n\n  async function collectUIState() {\n    if (window.CaseCon && typeof window.CaseCon.uiProvider === 'function') {\n      try { return await window.CaseCon.uiProvider(); } catch {}\n    }\n    // Minimal fallback: try reading active tab from DOM if tabs have aria-selected\n    let activeTab = undefined;\n    try {\n      const selected = document.querySelector('[role=\"tab\"][aria-selected=\"true\"]');\n      if (selected) {\n        const idx = selected.getAttribute('data-tab-index') || selected.getAttribute('data-index');\n        activeTab = idx ? Number(idx) : undefined;\n      }\n    } catch {}\n    return { ui: { activeTab }, temporary: { tempUids: readTempUids() } };\n  }\n\n  async function collectSnapshotEnvelope(name) {\n    const stores = await collectStoresFromProviders();\n    const { ui, temporary } = await collectUIState();\n    const id = uuid4();\n    const createdAt = nowIso();\n    const envelope = {\n      id,\n      name: name || defaultSnapshotName(),\n      createdBy,\n      createdAt,\n      appVersion,\n      schemaVersion: SCHEMA_VERSION,\n      stores,\n      ui: ui || {},\n      temporary: temporary || {},\n      uploads: { items: [] },\n    };\n    const text = JSON.stringify(envelope);\n    const checksum = await sha256Hex(text);\n    const sizeBytes = new Blob([text]).size;\n    return { ...envelope, meta: { sizeBytes, checksum: `sha256:${checksum}` } };\n  }\n\n  function validateSnapshot(s) {\n    const errs = [];\n    if (!s || typeof s !== 'object') errs.push('Invalid snapshot object');\n    if (!s.schemaVersion) errs.push('Missing schemaVersion');\n    if (s.schemaVersion && s.schemaVersion !== SCHEMA_VERSION) errs.push(`schemaVersion mismatch: app=${SCHEMA_VERSION} file=${s.schemaVersion}`);\n    if (!s.appVersion) errs.push('Missing appVersion');\n    return { ok: errs.length === 0, errs };\n  }\n\n  async function handleQuickSave() {\n    setShowSaveDialog(false);\n    setBusyMsg('Collecting snapshot...');\n    try {\n      const snap = await collectSnapshotEnvelope(defaultSnapshotName());\n      await saveToServer(snap, false);\n    } catch (e) {\n      console.error(e);\n      setError(String(e.message || e));\n    } finally {\n      setBusyMsg('');\n    }\n  }\n\n  async function handleSave() {\n    setBusyMsg('Collecting snapshot...');\n    try {\n      const snap = await collectSnapshotEnvelope(saveForm.name || defaultSnapshotName());\n      await saveToServer(snap, saveForm.includeFiles === true);\n    } catch (e) {\n      console.error(e);\n      setError(String(e.message || e));\n    } finally {\n      setBusyMsg('');\n      setShowSaveDialog(false);\n    }\n  }\n\n  async function handleSaveInline() {\n    // Open tag selector modal; actual save is handled after tag selection\n    setShowTagModal(true);\n  }\n\n  async function finalizeTaggedSave(tag) {\n    setShowTagModal(false);\n    setBusyMsg('Collecting snapshot...');\n    try {\n      const base = defaultSnapshotName(); // e.g., Recon-08-13-2025- 08:45\n      const name = `${base} [${tag}]`;\n      const snap = await collectSnapshotEnvelope(name);\n      await saveToServer(snap, false);\n      setSaveInlineName('');\n    } catch (e) {\n      console.error(e);\n      setError(String(e.message || e));\n    } finally {\n      setBusyMsg('');\n    }\n  }\n\n  async function saveToServer(snapshot, includeFiles) {\n    try {\n      setLoading(true);\n      const res = await fetch(`${API_BASE}/api/snapshots`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ name: snapshot.name, snapshot, includeFiles: !!includeFiles })\n      });\n      if (!res.ok) {\n        const body = await tryJson(res);\n        const msg = body && (body.error || body.message || body.raw);\n        setError(`Server save failed (${res.status}): ${msg || res.statusText}`);\n        return { ok: false, server: true };\n      }\n      const json = await res.json();\n      // Refresh list\n      await loadList();\n      toast(`Snapshot saved on server${json.id ? ' (#'+json.id+')' : ''}`);\n      return { ok: true, server: true, id: json.id };\n    } catch (e) {\n      console.warn('Server save unavailable; falling back to local download.', e);\n      // Fallback to local download only on network errors\n      downloadJson(`${snapshot.name}.casecon.snapshot.json`, snapshot);\n      toast('Server unavailable; downloaded snapshot locally');\n      return { ok: true, server: false };\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function loadList() {\n    try {\n      setLoading(true);\n      const res = await fetch(`${API_BASE}/api/snapshots`);\n      if (!res.ok) throw new Error('List unavailable');\n      const json = await res.json();\n      setSnapshots(Array.isArray(json.snapshots) ? json.snapshots : []);\n    } catch (e) {\n      // Graceful: server may not exist yet\n      setSnapshots([]);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  async function handleDownload(id) {\n    try {\n      const res = await fetch(`${API_BASE}/api/snapshots/${encodeURIComponent(id)}`);\n      if (!res.ok) throw new Error('Download failed');\n      const snap = await res.json();\n      downloadJson(`${snap.name || id}.casecon.snapshot.json`, snap);\n    } catch (e) {\n      setError('Unable to download snapshot');\n    }\n  }\n\n  async function handleDelete(id) {\n    if (!window.confirm('Delete snapshot permanently?')) return;\n    try {\n      const res = await fetch(`${API_BASE}/api/snapshots/${encodeURIComponent(id)}`, { method: 'DELETE' });\n      if (!res.ok) throw new Error('Delete failed');\n      await loadList();\n    } catch (e) {\n      setError('Unable to delete snapshot');\n    }\n  }\n\n  async function handleLoad(id, snapObj) {\n    let snap = snapObj;\n    try {\n      if (!snap) {\n        const res = await fetch(`${API_BASE}/api/snapshots/${encodeURIComponent(id)}`);\n        if (!res.ok) throw new Error('Load failed');\n        snap = await res.json();\n      }\n      const v = validateSnapshot(snap);\n      if (!v.ok) {\n        if (!window.confirm(`Snapshot validation warnings: ${v.errs.join('; ')}. Continue anyway?`)) return;\n      }\n      await applySnapshot(snap);\n    } catch (e) {\n      setError('Unable to load/apply snapshot');\n    }\n  }\n\n  async function applySnapshot(snapshot) {\n    setBusyMsg('Restoring snapshot — please wait...');\n    // Preferred: host app provides an atomic apply. Otherwise, emit a DOM event for the app to handle.\n    try {\n      if (window.CaseCon && typeof window.CaseCon.applySnapshot === 'function') {\n        await window.CaseCon.applySnapshot(snapshot);\n      } else {\n        const evt = new CustomEvent('casecon:apply-snapshot', { detail: { snapshot } });\n        window.dispatchEvent(evt);\n      }\n      toast('Snapshot restored');\n    } catch (e) {\n      console.error('Apply snapshot error', e);\n      setError('Apply failed. See console for details.');\n    } finally {\n      setBusyMsg('');\n    }\n  }\n\n  function toast(msg) {\n    // Minimal non-intrusive toast\n    try {\n      const el = document.createElement('div');\n      el.textContent = msg;\n      el.style.position = 'fixed';\n      el.style.bottom = '16px';\n      el.style.right = '16px';\n      el.style.background = '#111';\n      el.style.color = '#fff';\n      el.style.padding = '8px 12px';\n      el.style.borderRadius = '6px';\n      el.style.zIndex = '9999';\n      document.body.appendChild(el);\n      setTimeout(() => el.remove(), 2200);\n    } catch {}\n  }\n\n  function onUploadLocalFile(ev) {\n    const file = ev.target.files && ev.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = async () => {\n      try {\n        const text = String(reader.result || '');\n        const snap = JSON.parse(text);\n        setPreview(snap);\n      } catch (e) {\n        setError('Invalid JSON file');\n      }\n    };\n    reader.readAsText(file);\n  }\n\n  useEffect(() => { loadList(); }, []);\n\n  return (\n    <div style={{ padding: 16 }}>\n      <h2 style={{ fontSize: 20, fontWeight: 700, display: 'flex', alignItems: 'center', gap: 8 }}>\n        Server\n        <span\n          title={apiBase ? `API: ${apiBase}` : 'API: same-origin'}\n          style={{\n            fontSize: 12,\n            padding: '2px 8px',\n            borderRadius: 999,\n            background: conn === 'connected' ? '#e6ffed' : conn === 'checking' ? '#fffbea' : '#ffefef',\n            color: conn === 'connected' ? '#046b1b' : conn === 'checking' ? '#896100' : '#8b0000',\n            border: '1px solid ' + (conn === 'connected' ? '#b7f5c4' : conn === 'checking' ? '#ffe58f' : '#ffc4c4'),\n          }}\n        >\n          {`Server: ${conn === 'connected' ? 'Connected' : conn === 'checking' ? 'Checking…' : 'Unavailable'}`}\n        </span>\n        <button\n          onClick={() => { setConn('checking'); checkServer(); loadList(); }}\n          style={{ ...btnStyle, fontSize: 12, marginLeft: 6 }}\n          title=\"Retry connection check\"\n        >\n          Retry\n        </button>\n        <button\n          onClick={() => { setShowApiEdit(v => !v); setApiEditValue(apiBase || ''); }}\n          style={{ ...btnStyle, fontSize: 12, marginLeft: 6 }}\n          title=\"Set API base URL\"\n        >\n          Set API\n        </button>\n      </h2>\n      {showApiEdit && (\n        <div style={{ display: 'flex', gap: 6, alignItems: 'center', marginBottom: 8 }}>\n          <input\n            style={{ padding: '4px 8px', border: '1px solid #ddd', borderRadius: 6, minWidth: 260 }}\n            value={apiEditValue}\n            placeholder=\"http://localhost:5000\"\n            onChange={e => setApiEditValue(e.target.value)}\n          />\n          <button\n            style={{ ...btnStyle }}\n            onClick={() => {\n              const cleaned = String(apiEditValue || '').replace(/\\/$/, '');\n              try { window.localStorage && window.localStorage.setItem('casecon_api_base', cleaned); } catch {}\n              setApiBase(cleaned);\n              setConn('checking');\n              checkServer();\n              loadList();\n            }}\n          >Apply</button>\n          <button style={{ ...btnStyle }} onClick={() => setShowApiEdit(false)}>Close</button>\n        </div>\n      )}\n      {showDevInfo && (\n        <p style={{ color: '#555' }}>Snapshot Manager — App version: <code>{appVersion}</code></p>\n      )}\n\n      {busyMsg ? <div style={{ margin: '12px 0', padding: 8, background: '#eef' }}>{busyMsg}</div> : null}\n      {error ? <div style={{ margin: '12px 0', padding: 8, background: '#fee', color: '#900' }}>{error}</div> : null}\n\n      <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap', marginTop: 8, marginBottom: 16, alignItems: 'center' }}>\n        <input\n          style={{ flex: '1 1 260px', minWidth: 220, padding: '6px 8px', border: '1px solid #ddd', borderRadius: 6 }}\n          value={saveInlineName}\n          placeholder={\"Snapshot name (optional) e.g. 'post-recon-2025-08-12'\"}\n          onChange={(e) => setSaveInlineName(e.target.value)}\n        />\n        <button style={{ ...btnStyle }} onClick={handleSaveInline} title=\"Save snapshot with the given name\">Save</button>\n        <button style={{ ...btnStyle }} onClick={() => setShowSaveDialog(true)} title=\"Open advanced save options\">Save As…</button>\n        {/* Quick Save and file upload removed per request */}\n      </div>\n\n      {showSaveDialog && (\n        <div style={{ border: '1px solid #ddd', padding: 12, borderRadius: 8, marginBottom: 16 }}>\n          <h3 style={{ marginTop: 0 }}>Save Snapshot</h3>\n          <div style={{ display: 'grid', gap: 8 }}>\n            <label>\n              <div>Name</div>\n              <input\n                style={{ width: '100%' }}\n                value={saveForm.name}\n                placeholder={defaultSnapshotName()}\n                onChange={(e) => setSaveForm(s => ({ ...s, name: e.target.value }))}\n              />\n            </label>\n            <label style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n              <input type=\"checkbox\" checked={saveForm.includeFiles}\n                onChange={(e) => setSaveForm(s => ({ ...s, includeFiles: e.target.checked }))} />\n              Include attached files (if available)\n            </label>\n            <label style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\n              <input type=\"checkbox\" checked={saveForm.makePublic}\n                onChange={(e) => setSaveForm(s => ({ ...s, makePublic: e.target.checked }))} />\n              Make public to team (admin-only server setting)\n            </label>\n            <label>\n              <div>Comment</div>\n              <textarea\n                rows={2}\n                style={{ width: '100%' }}\n                value={saveForm.comment}\n                onChange={(e) => setSaveForm(s => ({ ...s, comment: e.target.value }))}\n              />\n            </label>\n            <div style={{ display: 'flex', gap: 8 }}>\n              <button style={{ ...btnStyle }} onClick={handleSave}>Save</button>\n              <button style={{ ...btnStyle }} onClick={() => setShowSaveDialog(false)}>Cancel</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showTagModal && (\n        <div style={{ position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.35)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1100 }}>\n          <div style={{ background: '#fff', padding: 16, borderRadius: 8, minWidth: 360 }}>\n            <h3 style={{ marginTop: 0 }}>Select a tag</h3>\n            <p style={{ marginTop: 0, color: '#555' }}>Choose where this Recon save belongs.</p>\n            <div style={{ display: 'flex', gap: 8 }}>\n              <button style={{ ...btnStyle }} onClick={() => finalizeTaggedSave('Atlanta')}>Atlanta</button>\n              <button style={{ ...btnStyle }} onClick={() => finalizeTaggedSave('Charlotte')}>Charlotte</button>\n              <button style={{ ...btnStyle }} onClick={() => finalizeTaggedSave('Raleigh')}>Raleigh</button>\n            </div>\n            <div style={{ marginTop: 12, textAlign: 'right' }}>\n              <button style={{ ...btnStyle }} onClick={() => setShowTagModal(false)}>Cancel</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {preview && (\n        <div style={{ border: '1px solid #ddd', padding: 12, borderRadius: 8, marginBottom: 16 }}>\n          <h3 style={{ marginTop: 0 }}>Preview Local Snapshot</h3>\n          <div style={{ fontSize: 12, color: '#333', marginBottom: 8 }}>\n            <div><b>Name:</b> {preview.name} <b>AppVersion:</b> {preview.appVersion} <b>Schema:</b> {preview.schemaVersion}</div>\n            <div><b>CreatedBy:</b> {preview.createdBy} <b>CreatedAt:</b> {preview.createdAt}</div>\n            <div><b>Size:</b> {preview.meta && preview.meta.sizeBytes} <b>Checksum:</b> {preview.meta && preview.meta.checksum}</div>\n          </div>\n          <div style={{ display: 'flex', gap: 8 }}>\n            <button style={{ ...btnStyle }} onClick={() => handleLoad(undefined, preview)}>Load</button>\n            <button style={{ ...btnStyle }} onClick={() => downloadJson(`${preview.name || 'snapshot'}.casecon.snapshot.json`, preview)}>Download</button>\n            <button style={{ ...btnStyle }} onClick={() => setPreview(null)}>Close</button>\n          </div>\n        </div>\n      )}\n\n      <div style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 8 }}>\n        <h3 style={{ margin: 0 }}>Server Snapshots</h3>\n        <button style={{ ...btnStyle, opacity: loading ? 0.6 : 1 }} onClick={loadList} disabled={loading}>Refresh</button>\n      </div>\n      <div style={{ border: '1px solid #eee', borderRadius: 8, overflow: 'hidden' }}>\n        <table style={{ width: '100%', borderCollapse: 'collapse', fontSize: 14 }}>\n          <thead style={{ background: '#fafafa' }}>\n            <tr>\n              <th style={{ textAlign: 'left', padding: 8 }}>Name</th>\n              <th style={{ textAlign: 'left', padding: 8 }}>CreatedBy</th>\n              <th style={{ textAlign: 'left', padding: 8 }}>CreatedAt</th>\n              <th style={{ textAlign: 'left', padding: 8 }}>AppVersion</th>\n              <th style={{ textAlign: 'right', padding: 8 }}>Size</th>\n              <th style={{ textAlign: 'left', padding: 8 }}>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {snapshots.length === 0 && (\n              <tr>\n                <td colSpan={6} style={{ padding: 12, color: '#777' }}>No snapshots on server or server unavailable.</td>\n              </tr>\n            )}\n            {snapshots.map((s) => (\n              <tr key={s.id}>\n                <td style={{ padding: 8 }}>{s.name || s.id}</td>\n                <td style={{ padding: 8 }}>{s.createdBy || ''}</td>\n                <td style={{ padding: 8 }}>{s.createdAt || ''}</td>\n                <td style={{ padding: 8 }}>{s.appVersion || ''}</td>\n                <td style={{ padding: 8, textAlign: 'right' }}>{typeof s.sizeBytes === 'number' ? s.sizeBytes.toLocaleString() : ''}</td>\n                <td style={{ padding: 8 }}>\n                  <div style={{ display: 'flex', gap: 8, flexWrap: 'wrap' }}>\n                    <button style={{ ...btnStyle }} onClick={() => handleDownload(s.id)}>Download</button>\n                    <button style={{ ...btnStyle }} onClick={() => handleLoad(s.id)}>Load</button>\n                    <button style={{ ...btnStyle }} onClick={() => setPreview({ id: s.id, ...s })}>Preview</button>\n                    <button style={{ ...btnStyle }} onClick={() => handleDelete(s.id)}>Delete</button>\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <p style={{ marginTop: 12, color: '#666' }}>\n        {showDevInfo && (\n          <>Notes: This panel avoids touching existing code. For full fidelity, expose snapshotProviders/uiProvider/applySnapshot via window.CaseCon.</>\n        )}\n      </p>\n    </div>\n  );\n}\n"],"names":["SCHEMA_VERSION","API_BASE","window","CASECON_API_BASE","String","replace","localStorage","ls","getItem","env","process","direct","REACT_APP_API_BASE","uidUrl","REACT_APP_UID_API_URL","u","URL","protocol","host","console","info","downloadJson","filename","obj","blob","Blob","JSON","stringify","type","url","createObjectURL","a","document","createElement","href","download","body","appendChild","click","revokeObjectURL","remove","AdminDeskPanel","showDevInfo","btnStyle","padding","border","borderRadius","background","color","cursor","showTagModal","setShowTagModal","useState","snapshots","setSnapshots","loading","setLoading","error","setError","showSaveDialog","setShowSaveDialog","saveForm","setSaveForm","name","includeFiles","makePublic","comment","preview","setPreview","busyMsg","setBusyMsg","saveInlineName","setSaveInlineName","conn","setConn","apiBase","setApiBase","showApiEdit","setShowApiEdit","apiEditValue","setApiEditValue","async","checkServer","base","res","fetch","method","ok","useEffect","defaultSnapshotName","s","appVersion","useMemo","fromEnv","REACT_APP_VERSION","fromGlobal","__APP_VERSION","CaseCon","getAppVersion","undefined","createdBy","username","__USER_NAME","d","Date","pad","n","padStart","getMonth","getDate","getFullYear","getHours","getMinutes","readTempUids","g","__CASECON_TEMP_UIDS","Map","Object","fromEntries","entries","collectSnapshotEnvelope","stores","providers","Array","isArray","snapshotProviders","results","Promise","allSettled","map","fn","resolve","then","forEach","r","status","value","assign","collectStoresFromProviders","ui","temporary","uiProvider","activeTab","selected","querySelector","idx","getAttribute","Number","tempUids","collectUIState","id","c","crypto","getRandomValues","Uint8Array","toString","createdAt","toISOString","envelope","schemaVersion","uploads","items","text","checksum","subtle","data","TextEncoder","encode","hash","digest","from","b","join","h","i","length","charCodeAt","slice","sha256Hex","sizeBytes","size","meta","finalizeTaggedSave","tag","snap","saveToServer","e","message","snapshot","headers","parse","raw","tryJson","msg","statusText","server","json","loadList","toast","warn","Error","handleLoad","snapObj","encodeURIComponent","v","errs","push","validateSnapshot","confirm","applySnapshot","evt","CustomEvent","detail","dispatchEvent","el","textContent","style","position","bottom","right","zIndex","setTimeout","_jsxs","children","fontSize","fontWeight","display","alignItems","gap","_jsx","title","onClick","marginLeft","marginBottom","minWidth","placeholder","onChange","target","cleaned","setItem","margin","flexWrap","marginTop","flex","width","checked","rows","inset","justifyContent","textAlign","opacity","disabled","overflow","borderCollapse","colSpan","toLocaleString","handleDownload","handleDelete"],"sourceRoot":""}
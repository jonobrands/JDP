"use strict";(self.webpackChunkcasecon_frontend=self.webpackChunkcasecon_frontend||[]).push([[302],{302:(e,r,a)=>{a.r(r),a.d(r,{default:()=>s});var t=a(43),c=a(579);function s(e){let{onCompare:r,onClearResults:a,onExport:s,rows:i=[]}=e;const[n,l]=(0,t.useState)(!1),d=(e,r)=>{for(const a of r)if(e&&e[a])return e[a];return""},o=e=>d(e,["clientUID","client_uid","clientId","client_id","clientUid"]),g=e=>d(e,["caregiverUID","caregiver_uid","caregiverId","caregiver_id","caregiverUid"]),h=["bucaCaregiver","BUCA_caregiver","buca_caregiver","bucaCG","buca_cg","bucaCaregiverName","bucaCaregiver1","caregiver_buca","BUCA_CG"],m=["jovieCaregiver","JOVIE_caregiver","jovie_caregiver","jovieCG","jovie_cg","jovieCaregiverName","jovieCaregiver1","caregiver_jovie","JOVIE_CG"],u=["bucaCaregiverUID","buca_caregiver_uid","BUCA_caregiver_uid","bucaCaregiverId","buca_caregiver_id","BUCA_CG_UID","caregiver_uid_buca","caregiverUidBuca"],x=["jovieCaregiverUID","jovie_caregiver_uid","JOVIE_caregiver_uid","jovieCaregiverId","jovie_caregiver_id","JOVIE_CG_UID","caregiver_uid_jovie","caregiverUidJovie"],p=e=>(e||"").toString().trim().toUpperCase(),b=e=>(e||"").toString().trim().replace(/\s+/g," ").toUpperCase(),v={SAM:"SAMANTHA",MIKE:"MICHAEL",DAVE:"DAVID",KATE:"KATHERINE",KATIE:"KATHERINE",LIZ:"ELIZABETH",BETH:"ELIZABETH",JEN:"JENNIFER",JESS:"JESSICA",ALEX:"ALEXANDER",ABBY:"ABIGAIL",TOM:"THOMAS"},j=(0,t.useRef)(()=>{const e=new Date;return`${`${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}`}-${Math.random().toString(36).slice(2,6).toUpperCase()}`}),C="function"===typeof j.current?j.current=j.current():j.current,_=(0,t.useRef)(new Map),N=(e,r,a)=>{const t=((e,r,a)=>`${e}|${b(r)}|${b(a)}`)(e,r||"",a||"");return _.current.has(t)||_.current.set(t,`TMP-${C}-${(e=>{let r=0;for(let a=0;a<e.length;a++)r=(r<<5)-r+e.charCodeAt(a),r|=0;return Math.abs(r).toString(36).toUpperCase().slice(0,6)})(t)}`),_.current.get(t)},f=(()=>{const e=i&&i._meta?i._meta:null;return e&&(!1===e.bucaUidSynced||!1===e.jovieUidSynced)?(0,c.jsx)("div",{className:"text-xs text-blue-700 bg-blue-50 border border-blue-200 rounded px-2 py-1 mb-2",children:"Waiting for UID enrichment to complete..."}):null})();return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"flex gap-6 mt-2 mb-4 text-sm items-center",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:"inline-block w-4 h-4 bg-green-100 border border-green-400 rounded"})," Exact Match"]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:"inline-block w-4 h-4 bg-orange-100 border border-orange-400 rounded"})," Verify Which CG"]}),(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("span",{className:"inline-block w-4 h-4 bg-red-100 border border-red-400 rounded"})," Complete Mismatch"]})]}),(0,c.jsxs)("div",{className:"flex gap-4 mb-4 items-center",children:[(0,c.jsx)("button",{className:"bg-orange-500 text-white px-6 py-2 rounded font-semibold hover:bg-orange-600",onClick:r,children:"Compare BUCA & JOVIE"}),(0,c.jsx)("button",{className:"bg-gray-300 text-gray-800 px-6 py-2 rounded font-semibold hover:bg-gray-400",onClick:a,children:"Clear Results"}),(0,c.jsxs)("label",{className:"flex items-center gap-2 ml-2 text-sm",children:[(0,c.jsx)("input",{type:"checkbox",checked:n,onChange:e=>l(e.target.checked)}),(0,c.jsx)("span",{children:"Show UIDs"})]})]}),f,(0,c.jsx)("div",{className:"overflow-x-auto border rounded bg-white mb-2 output-scroll",children:(0,c.jsxs)("table",{className:"min-w-full text-sm",children:[(0,c.jsx)("thead",{className:"bg-gray-200",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"p-2 font-bold",children:"#"}),(0,c.jsx)("th",{className:"p-2 font-bold",children:"Source"}),(0,c.jsx)("th",{className:"p-2 font-bold",children:"Client"}),(0,c.jsx)("th",{className:"p-2 font-bold",children:"Caregiver"}),(0,c.jsx)("th",{className:"p-2 font-bold",children:"Match Type"})]})}),(0,c.jsx)("tbody",{children:i.map((e,r)=>{let a="",t="",s="",i="";e&&"BOTH"===e.source&&(a=d(e,h)||"",t=d(e,m)||"",s=d(e,u)||"",i=d(e,x)||"",a||"verify_cg"!==e.tag&&"Verify Which CG"!==e.match_type||(a=e.caregiver||""),s||N("BUCA",e.client,a||e.caregiver||""),i||N("JOVIE",e.client,t||""));const l=p(s),j=p(i),C=e&&"BOTH"===e.source,_=C&&!!l&&!!j,f=_&&l===j,E=C&&a&&t&&!((e,r)=>{const a=b(e),t=b(r);if(!a||!t)return a===t;if(a===t)return!0;const c=a.split(" "),s=t.split(" "),i=c[0]||"",n=s[0]||"";return c.slice(1).join(" ")===s.slice(1).join(" ")&&(v[i]||i)===(v[n]||n)})(a,t),A=C&&(_&&!f||!_&&E);let I="";return"complete_mismatch"===e.tag||"Complete Mismatch"===e.match_type?I="bg-red-100":A?I="bg-orange-100":(f||"exact_match"===e.tag||"Exact Match"===e.match_type)&&(I="bg-green-100"),(0,c.jsxs)("tr",{className:I+" border-b",children:[(0,c.jsx)("td",{className:"p-2",children:r+1}),(0,c.jsx)("td",{className:"p-2",children:e.source}),(0,c.jsxs)("td",{className:"p-2",children:[e.client,n&&(0,c.jsxs)("span",{className:"text-gray-500 text-xs ml-2",children:["[",o(e)||"MAST NF","]"]})]}),(0,c.jsxs)("td",{className:"p-2",children:[A&&t?(0,c.jsx)("span",{children:t}):(0,c.jsx)("span",{children:e.caregiver}),n&&(0,c.jsxs)("span",{className:"text-gray-500 text-xs ml-2",children:["[",g(e)||"MAST NF","]"]})]}),(0,c.jsx)("td",{className:"p-2",children:A?(0,c.jsxs)("span",{children:[(0,c.jsx)("span",{className:"font-semibold",children:"Caregiver Mismatch"}),a?(0,c.jsxs)("span",{className:"ml-2 text-gray-800",children:["BUCA -> ",a]}):null]}):f?(0,c.jsx)("span",{className:"font-semibold",children:"Exact Match"}):e.match_type})]},r)})})]})})]})}}}]);
//# sourceMappingURL=302.e0bcb630.chunk.js.map